# Week 1-2 å®ç°æŒ‡å—ï¼šæœåŠ¡å‘ç°ä¸åŸºç¡€æ¶æ„

> **å®ŒæˆçŠ¶æ€**: âœ… å·²å®Œæˆ  
> **å®ç°æ—¥æœŸ**: $(date +%Y-%m-%d)  
> **æ ¸å¿ƒæŠ€æœ¯**: Spring Cloud Eureka, Spring Boot Actuator, OpenFeign

---

## ğŸ¯ ç›®æ ‡å›é¡¾

å»ºç«‹ ShopHub ç”µå•†å¹³å°çš„å¾®æœåŠ¡åŸºç¡€æ¶æ„ï¼Œå®ç°ï¼š
- æœåŠ¡æ³¨å†Œä¸å‘ç°æœºåˆ¶
- å¥åº·æ£€æŸ¥ç›‘æ§
- æœåŠ¡é—´é€šä¿¡
- å¤šå®ä¾‹éƒ¨ç½²éªŒè¯

---

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ShopHub å¾®æœåŠ¡æ¶æ„                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Eureka Server (8761) - æœåŠ¡æ³¨å†Œä¸­å¿ƒ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  User Service (8081)     â”‚ ç”¨æˆ·ç®¡ç†ã€èº«ä»½è®¤è¯    â”‚
â”‚  Product Service (8082)  â”‚ äº§å“ç›®å½•ã€åº“å­˜ç®¡ç†    â”‚
â”‚  Order Service (8083)    â”‚ è®¢å•å¤„ç†ã€çŠ¶æ€è·Ÿè¸ª    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ å®ç°æ¸…å•

### âœ… ä»»åŠ¡1: Eureka Server è®¾ç½® (ç«¯å£ 8761)

**é…ç½®æ–‡ä»¶**: `eureka-server/src/main/resources/application.yml`

```yaml
server:
  port: 8761

spring:
  application:
    name: eureka-server

eureka:
  instance:
    hostname: localhost
  client:
    register-with-eureka: false    # æ³¨å†Œä¸­å¿ƒä¸æ³¨å†Œè‡ªå·±
    fetch-registry: false         # æ³¨å†Œä¸­å¿ƒä¸è·å–æœåŠ¡åˆ—è¡¨
  server:
    enable-self-preservation: false  # å¼€å‘ç¯å¢ƒå…³é—­è‡ªæˆ‘ä¿æŠ¤
    eviction-interval-timer-in-ms: 5000  # 5ç§’æ¸…ç†é—´éš”
```

**å…³é”®æ³¨è§£**: `@EnableEurekaServer`

**éªŒè¯æ–¹æ³•**: è®¿é—® http://localhost:8761 æŸ¥çœ‹ Eureka Dashboard

---

### âœ… ä»»åŠ¡2: æœåŠ¡æ³¨å†Œé…ç½®

**æ‰€æœ‰å¾®æœåŠ¡çš„é€šç”¨é…ç½®**:

```yaml
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka/
    register-with-eureka: true     # æ³¨å†Œåˆ°Eureka
    fetch-registry: true          # è·å–æœåŠ¡åˆ—è¡¨
  instance:
    prefer-ip-address: true       # ä½¿ç”¨IPåœ°å€æ³¨å†Œ
    lease-renewal-interval-in-seconds: 10    # 10ç§’å¿ƒè·³
    lease-expiration-duration-in-seconds: 30 # 30ç§’è¿‡æœŸ
```

**å…³é”®æ³¨è§£**: `@EnableDiscoveryClient`

**éªŒè¯æ–¹æ³•**: Eureka Dashboard ä¸­åº”æ˜¾ç¤º3ä¸ªæœåŠ¡å®ä¾‹

---

### âœ… ä»»åŠ¡3: å¥åº·æ£€æŸ¥å®ç°

**Spring Boot Actuator é…ç½®**:

```yaml
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
```

**è‡ªå®šä¹‰å¥åº·æ£€æŸ¥ç«¯ç‚¹**:
- `/actuator/health` - ç³»ç»Ÿå¥åº·çŠ¶æ€
- `/api/{service}/health` - ä¸šåŠ¡å¥åº·çŠ¶æ€

**éªŒè¯æ–¹æ³•**: 
```bash
curl http://localhost:8081/actuator/health
curl http://localhost:8081/api/users/health
```

---

### âœ… ä»»åŠ¡4: æœåŠ¡é—´é€šä¿¡

**Feign å®¢æˆ·ç«¯é…ç½®** (`user-service`):

```java
@FeignClient(name = "product-service")
public interface ProductServiceClient {
    @GetMapping("/api/products/{productId}/exists")
    String checkProductExists(@PathVariable("productId") Long productId);
}
```

**äº§å“æœåŠ¡æ¥å£å®ç°** (`product-service`):

```java
@GetMapping("/{productId}/exists")
public ResponseEntity<String> checkProductExists(@PathVariable Long productId) {
    // ä¸šåŠ¡é€»è¾‘å®ç°
}
```

**éªŒè¯æ–¹æ³•**: 
```bash
curl http://localhost:8081/api/users/check-product/1
```

---

### âœ… ä»»åŠ¡5: å¤šå®ä¾‹æµ‹è¯•

**æµ‹è¯•è„šæœ¬**: `test-service-discovery.sh`

ä¸»è¦åŠŸèƒ½ï¼š
1. ğŸ” **æœåŠ¡å¯åŠ¨æ£€æŸ¥** - éªŒè¯æ‰€æœ‰æœåŠ¡æ­£å¸¸å¯åŠ¨
2. ğŸ¥ **å¥åº·çŠ¶æ€éªŒè¯** - æ£€æŸ¥å¥åº·æ£€æŸ¥ç«¯ç‚¹
3. ğŸ“‹ **æ³¨å†ŒçŠ¶æ€ç¡®è®¤** - éªŒè¯Eurekaæ³¨å†Œæƒ…å†µ
4. ğŸ”„ **æœåŠ¡é€šä¿¡æµ‹è¯•** - æµ‹è¯•Feignè°ƒç”¨
5. ğŸ“Š **ç»Ÿè®¡ä¿¡æ¯å±•ç¤º** - æ˜¾ç¤ºä¸šåŠ¡æ•°æ®

**è¿è¡Œæ–¹å¼**:
```bash
chmod +x test-service-discovery.sh
./test-service-discovery.sh
```

---

## ğŸ› ï¸ æŠ€æœ¯å®ç°äº®ç‚¹

### ğŸ”§ é…ç½®ç®¡ç†
- **ç»Ÿä¸€é…ç½®æ ¼å¼**: æ‰€æœ‰æœåŠ¡ä½¿ç”¨ä¸€è‡´çš„YAMLé…ç½®
- **ç¯å¢ƒéš”ç¦»**: å¼€å‘ç¯å¢ƒä¼˜åŒ–çš„Eurekaé…ç½®
- **æ—¥å¿—æ ‡å‡†åŒ–**: ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼å’Œçº§åˆ«

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- **å¿«é€Ÿæ³¨å†Œ**: 10ç§’å¿ƒè·³é—´éš”ï¼Œå¿«é€Ÿæ•…éšœæ£€æµ‹
- **å†…å­˜æ•°æ®åº“**: H2å†…å­˜æ•°æ®åº“ï¼Œé€‚åˆå¼€å‘æµ‹è¯•
- **è¿æ¥æ± é…ç½®**: ä¼˜åŒ–çš„æ•°æ®åº“è¿æ¥é…ç½®

### ğŸ›¡ï¸ å®¹é”™è®¾è®¡
- **ä¼˜é›…é™çº§**: æœåŠ¡ä¸å¯ç”¨æ—¶çš„å‹å¥½é”™è¯¯æç¤º
- **è¶…æ—¶é…ç½®**: åˆç†çš„æœåŠ¡è°ƒç”¨è¶…æ—¶æ—¶é—´
- **å¼‚å¸¸å¤„ç†**: å®Œå–„çš„å¼‚å¸¸æ•è·å’Œå¤„ç†æœºåˆ¶

---

## ğŸ“Š ä¸šåŠ¡æ•°æ®æ¨¡æ‹Ÿ

### ğŸ‘¥ ç”¨æˆ·æœåŠ¡æ•°æ®
- ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¸ªäººä¿¡æ¯ç®¡ç†
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- æ´»è·ƒç”¨æˆ·ç»Ÿè®¡

### ğŸ“¦ äº§å“æœåŠ¡æ•°æ®
```java
// 5ä¸ªæ¨¡æ‹Ÿäº§å“
iPhone 15 Pro (Â¥8999) - Apple
MacBook Pro M3 (Â¥15999) - Apple  
Samsung Galaxy S24 (Â¥6999) - Samsung
ThinkPad X1 Carbon (Â¥12999) - Lenovo
iPad Air (Â¥4299) - Apple
```

### ğŸ“‹ è®¢å•æœåŠ¡æ•°æ®
```java
// 4ä¸ªæ¨¡æ‹Ÿè®¢å•ï¼Œæ¶µç›–ä¸åŒçŠ¶æ€
è®¢å•1: COMPLETED - Â¥24998 (iPhone + MacBook)
è®¢å•2: PROCESSING - Â¥6999 (Samsung)
è®¢å•3: PENDING - Â¥4299 (iPad)
è®¢å•4: SHIPPED - Â¥13298 (iPhone + iPad)
```

---

## ğŸ§ª æµ‹è¯•éªŒè¯ç»“æœ

### âœ… åŠŸèƒ½æµ‹è¯•
- [x] Eureka Server æ­£å¸¸å¯åŠ¨ (8761ç«¯å£)
- [x] 3ä¸ªæœåŠ¡æˆåŠŸæ³¨å†Œåˆ°Eureka
- [x] å¥åº·æ£€æŸ¥ç«¯ç‚¹å…¨éƒ¨æ­£å¸¸å“åº”
- [x] æœåŠ¡é—´Feignè°ƒç”¨æˆåŠŸ
- [x] ä¸šåŠ¡APIæ¥å£æ­£å¸¸å·¥ä½œ

### âœ… æ€§èƒ½æµ‹è¯•
- [x] æœåŠ¡æ³¨å†Œæ—¶é—´ < 30ç§’
- [x] å¥åº·æ£€æŸ¥å“åº”æ—¶é—´ < 1ç§’
- [x] æœåŠ¡é—´è°ƒç”¨å“åº”æ—¶é—´ < 2ç§’
- [x] Eureka Dashboard å“åº”æ­£å¸¸

### âœ… å®¹é”™æµ‹è¯•
- [x] æœåŠ¡é‡å¯åè‡ªåŠ¨é‡æ–°æ³¨å†Œ
- [x] ç½‘ç»œå¼‚å¸¸æ—¶çš„ä¼˜é›…å¤„ç†
- [x] æœåŠ¡ä¸å¯ç”¨æ—¶çš„é™çº§å“åº”

---

## ğŸ“ å­¦ä¹ è¦ç‚¹æ€»ç»“

### 1ï¸âƒ£ **æœåŠ¡å‘ç°åŸç†**
- Eurekaé‡‡ç”¨APæ¨¡å¼(å¯ç”¨æ€§ä¼˜å…ˆ)
- å®¢æˆ·ç«¯ç¼“å­˜æœºåˆ¶æé«˜æ€§èƒ½
- å¿ƒè·³æœºåˆ¶å®ç°æ•…éšœæ£€æµ‹

### 2ï¸âƒ£ **å¾®æœåŠ¡é€šä¿¡**
- OpenFeignç®€åŒ–HTTPè°ƒç”¨
- æœåŠ¡åæ›¿ä»£ç¡¬ç¼–ç IPåœ°å€
- è´Ÿè½½å‡è¡¡è‡ªåŠ¨é›†æˆ

### 3ï¸âƒ£ **ç›‘æ§ä¸è¿ç»´**
- Spring Boot Actuatoræä¾›æ ‡å‡†ç›‘æ§
- è‡ªå®šä¹‰å¥åº·æ£€æŸ¥æ”¯æŒä¸šåŠ¡ç›‘æ§
- æ—¥å¿—å’ŒæŒ‡æ ‡çš„é‡è¦æ€§

### 4ï¸âƒ£ **é…ç½®æœ€ä½³å®è·µ**
- å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®å·®å¼‚
- æœåŠ¡å®ä¾‹çš„ä¼˜åŒ–é…ç½®
- å®‰å…¨æ€§å’Œæ€§èƒ½çš„å¹³è¡¡

---

## ğŸ”„ ä¸‹ä¸€æ­¥è®¡åˆ’

**Week 3 ç›®æ ‡**: API Gateway ä¸è·¯ç”±
- å®ç°ç»Ÿä¸€å…¥å£ (Spring Cloud Gateway)
- è¯·æ±‚è·¯ç”±å’Œè¿‡æ»¤
- è·¨åŸŸå’Œå®‰å…¨é…ç½®

**å‡†å¤‡å·¥ä½œ**:
- ä¿æŒå½“å‰æœåŠ¡è¿è¡Œ
- å‡†å¤‡GatewayæœåŠ¡æ¨¡å—
- è®¾è®¡APIè·¯ç”±è§„åˆ™

---

## ğŸ“š å‚è€ƒèµ„æº

- [Spring Cloud Eureka å®˜æ–¹æ–‡æ¡£](https://docs.spring.io/spring-cloud-netflix/docs/current/reference/html/#service-discovery-eureka-clients)
- [Spring Boot Actuator æŒ‡å—](https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html)
- [OpenFeign ä½¿ç”¨æŒ‡å—](https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/)

---

*ğŸ‰ æ­å–œå®Œæˆ Week 1-2 çš„å­¦ä¹ ç›®æ ‡ï¼æ‚¨å·²ç»å»ºç«‹äº†ä¸€ä¸ªå®Œæ•´çš„å¾®æœåŠ¡åŸºç¡€æ¶æ„ï¼Œä¸ºåç»­åŠŸèƒ½çš„å®ç°å¥ å®šäº†åšå®åŸºç¡€ã€‚* 